function updateInput(a,t){-1==a.toLowerCase().indexOf("pi")&&-1==a.toLowerCase().indexOf("theta")||$(t).val(a.replace(/theta/gi,"θ").replace(/pi/gi,"π"))}function handleClick(a){if(isGraph){var t=a.x,e=a.y;t-=.3*window.innerWidth+canvas.width/2+canvas.offsetLeft,e-=canvas.offsetTop,e=canvas.height/2-e,t/=scalingFactor,e/=scalingFactor,updateIntegral(0,1,5)}}function updateIntegral(a,t,e){$("#integralrepresentation p").html("$$\\frac{1}{2}\\int_{"+a+"}^{"+t+"} r^2 dθ = "+e+"$$");var c=document.getElementById("integralrepresentation");MathJax.Hub.Queue(["Typeset",MathJax.Hub,c])}function calculateTheta(a,t){}function fillInArea(){}function drawAxes(){ctx.strokeStyle="#222831",ctx.lineWidth=2,ctx.beginPath(),ctx.moveTo(0,canvas.height/2),ctx.lineTo(canvas.width,canvas.height/2),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width/2,0),ctx.lineTo(canvas.width/2,canvas.height),ctx.stroke(),ctx.save()}function submitEquation(){var a=$("#expression").val().replace(/θ/g,"x");node=math.parse(a),isGraph=!0,ctx.clearRect(0,0,canvas.width,canvas.height),drawAxes(),step=parseFloat($("#step").val());var t=math.eval($("#lowerbound").val().replace(/π/g,"pi")),e=math.eval($("#upperbound").val().replace(/π/g,"pi"));scalingFactor=(canvas.height-40)/(2*Math.round(getMaxRadius(t,e)));for(c=.5;!0&&!(scalingFactor*c>canvas.height/2);c+=.5)c%1==0?(ctx.strokeStyle="#9a9a9a",ctx.lineWidth=2):(ctx.strokeStyle="#dcdcdc",ctx.lineWidth=1),ctx.beginPath(),ctx.moveTo(0,canvas.height/2+scalingFactor*c),ctx.lineTo(canvas.width,canvas.height/2+scalingFactor*c),ctx.stroke(),ctx.beginPath(),ctx.moveTo(0,canvas.height/2-scalingFactor*c),ctx.lineTo(canvas.width,canvas.height/2-scalingFactor*c),ctx.stroke();for(var c=.5;!0&&!(scalingFactor*c>canvas.width/2);c+=.5)c%1==0?(ctx.strokeStyle="#9a9a9a",ctx.lineWidth=2):(ctx.strokeStyle="#dcdcdc",ctx.lineWidth=1),ctx.beginPath(),ctx.moveTo(canvas.width/2+scalingFactor*c,0),ctx.lineTo(canvas.width/2+scalingFactor*c,canvas.height),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width/2-scalingFactor*c,0),ctx.lineTo(canvas.width/2-scalingFactor*c,canvas.height),ctx.stroke();ctx.save(),ctx.fillStyle="#0092CA";for(var n=t;n<=e;n+=step){var i=node.eval({x:n}),o=i*math.eval("cos("+n+")")*scalingFactor,s=i*math.eval("sin("+n+")")*scalingFactor;ctx.fillRect(canvas.width/2+o,canvas.height/2-s,2,2)}ctx.save()}function getMaxRadius(a,t){for(var e=$("#expression").val().replace(/θ/g,"x"),c=math.derivative(e,"x"),n=[a,t],i=a;i<=t;i+=step){var o=c.eval({x:i});Math.abs(o)<=.001&&n.push(i)}console.log(n);for(var s=node.eval({x:a}),r=1;r<n.length;r++)node.eval({x:n[r]})>s&&(s=node.eval({x:n[r]}));return console.log(s),s}function integrate(a,t,e){for(var c=math.parse(a),n=0,i=0,o=0,s=t;s<=e-5e-4;s+=5e-4)n+=5e-4*c.eval({x:s}),i+=5e-4*c.eval({x:s+5e-4}),o+=5e-4*c.eval({x:s+25e-5});return(2*o+(n+i)/2)/3}var step,scalingFactor,canvas,ctx,isGraph=!1;$(document).ready(function(){(canvas=document.getElementById("graphCanvas")).width=.7*window.innerWidth,canvas.height=window.innerHeight,ctx=canvas.getContext("2d"),canvas.addEventListener("mousedown",handleClick,!1),$("#expression, .bound, #step").keypress(function(a){return!(a.which&&13==a.which||a.keyCode&&13==a.keyCode)||($("#button").click(),!1)})});